{"version":3,"sources":["../../../src/routes/ksiazki.js"],"names":["express","require","router","Router","mongoose","connect","ksiazkiModel","model","ksiazkaSchema","get","req","res","next","tytul","query","autor","rok_wydania","undefined","console","log","find","err","rec","json","result","length"],"mappings":";;;;;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,WAAWH,QAAQ,UAAR,CAAjB;;AAEA;AACAG,SAASC,OAAT,CAAiB,gCAAjB;;AAKA;AACA,IAAIC,eAAeF,SAASG,KAAT,CAAe,UAAf,EAA0BC,aAA1B,CAAnB;;AAEA;AACAN,OAAOO,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACrC,QAAIC,QAAMH,IAAII,KAAJ,CAAUD,KAApB;AACA,QAAIE,QAAML,IAAII,KAAJ,CAAUC,KAApB;AACA,QAAIC,cAAYN,IAAII,KAAJ,CAAUE,WAA1B;AACA,QAAIF,QAAM,EAAV;AACA,QAAID,UAAQI,SAAZ,EACIH,MAAMD,KAAN,GAAYA,KAAZ;AACJ,QAAIE,UAAQE,SAAZ,EACIH,MAAMC,KAAN,GAAYA,KAAZ;AACJ,QAAIC,gBAAcC,SAAlB,EACIH,MAAME,WAAN,GAAkBA,WAAlB;AACJE,YAAQC,GAAR,CAAYL,KAAZ;AACAR,iBAAac,IAAb,CAAkBN,KAAlB,EAAyB,UAAUO,GAAV,EAAeC,GAAf,EAAoB;AACzC,YAAID,GAAJ,EAAQ;AACJH,oBAAQC,GAAR,CAAY,UAAZ;AACAR,gBAAIY,IAAJ,CAAS,EAAEC,QAAS,eAAX,EAAT;AACH,SAHD,MAIK,IAAIF,IAAIG,MAAJ,KAAa,CAAjB,EAAmB;AACpBd,gBAAIY,IAAJ,CAAU,EAACC,QAAS,IAAV,EAAV;AACH,SAFI,MAGA;AACDb,gBAAIY,IAAJ,CAASD,GAAT;AACH;AAEJ,KAZD;AAaH,CAzBD;;kBA2BepB,M","file":"ksiazki.js","sourcesContent":["const express = require('express');\nconst router = express.Router();\nconst mongoose = require('mongoose');\n\n//db setup\nmongoose.connect('mongodb://localhost/biblioteka');\n\n\n\n\n//create a model\nlet ksiazkiModel = mongoose.model('ksiazkis',ksiazkaSchema);\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n    let tytul=req.query.tytul;\n    let autor=req.query.autor;\n    let rok_wydania=req.query.rok_wydania;\n    let query={};\n    if (tytul!==undefined)\n        query.tytul=tytul;\n    if (autor!==undefined)\n        query.autor=autor;\n    if (rok_wydania!==undefined)\n        query.rok_wydania=rok_wydania;\n    console.log(query);\n    ksiazkiModel.find(query, function (err, rec) {\n        if (err){\n            console.log('db error');\n            res.json({ result : '!!! ERROR !!!'});\n        }\n        else if (rec.length===0){\n            res.json( {result : null} );\n        }\n        else {\n            res.json(rec);\n        }\n        \n    });\n});\n\nexport default router;\n"]}