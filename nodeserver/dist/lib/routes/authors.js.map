{"version":3,"sources":["../../../lib/routes/authors.js"],"names":["Object","defineProperty","exports","value","router","undefined","_express","require","_express2","_interopRequireDefault","_model","_model2","obj","__esModule","default","Router","get","req","res","next","command","query","json","result","imie","nazwisko","data_urodzenia","console","log","find","err","rec","length"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;AAGAD,QAAQE,MAAR,GAAiBC,SAAjB;;AAEA,IAAIC,WAAWC,QAAQ,SAAR,CAAf;;AAEA,IAAIC,YAAYC,uBAAuBH,QAAvB,CAAhB;;AAEA,IAAII,SAASH,QAAQ,gBAAR,CAAb;;AAEA,IAAII,UAAUF,uBAAuBC,MAAvB,CAAd;;AAEA,SAASD,sBAAT,CAAgCG,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,IAAIR,SAAS,IAAII,UAAUM,OAAV,CAAkBC,MAAtB,EAAb;;AAEA;AACAX,OAAOY,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACtC,QAAIC,UAAUH,IAAII,KAAJ,CAAUD,OAAxB;AACA,QAAIA,YAAY,YAAhB,EAA8B;AAC1BF,YAAII,IAAJ,CAAS,EAAEC,QAAQ,IAAV,EAAT;AACH,KAFD,MAEO;AACH,YAAIC,OAAOP,IAAII,KAAJ,CAAUG,IAArB;AACA,YAAIC,WAAWR,IAAII,KAAJ,CAAUI,QAAzB;AACA,YAAIC,iBAAiBT,IAAII,KAAJ,CAAUK,cAA/B;AACA,YAAIL,QAAQ,EAAZ;AACA,YAAIG,SAASnB,SAAb,EAAwBgB,MAAMG,IAAN,GAAaA,IAAb;AACxB,YAAIC,aAAapB,SAAjB,EAA4BgB,MAAMI,QAAN,GAAiBA,QAAjB;AAC5B,YAAIC,mBAAmBrB,SAAvB,EAAkCgB,MAAMK,cAAN,GAAuBA,cAAvB;AAClCC,gBAAQC,GAAR,CAAYP,KAAZ;AACAV,gBAAQG,OAAR,CAAgBe,IAAhB,CAAqBR,KAArB,EAA4B,UAAUS,GAAV,EAAeC,GAAf,EAAoB;AAC5C,gBAAID,GAAJ,EAAS;AACLH,wBAAQC,GAAR,CAAY,UAAZ;AACAV,oBAAII,IAAJ,CAAS,EAAEC,QAAQ,eAAV,EAAT;AACH,aAHD,MAGO,IAAIQ,IAAIC,MAAJ,KAAe,CAAnB,EAAsB;AACzBd,oBAAII,IAAJ,CAAS,EAAEC,QAAQ,IAAV,EAAT;AACH,aAFM,MAEA;AACHL,oBAAII,IAAJ,CAASS,GAAT;AACH;AACJ,SATD;AAUH;AACJ,CAxBD;;AA0BA7B,QAAQE,MAAR,GAAiBA,MAAjB","file":"authors.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.router = undefined;\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _model = require('./author/model');\n\nvar _model2 = _interopRequireDefault(_model);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = new _express2.default.Router();\n\n/* GET users listing. */\nrouter.get('/', function (req, res, next) {\n    var command = req.query.command;\n    if (command === 'dateUpdate') {\n        res.json({ result: null });\n    } else {\n        var imie = req.query.imie;\n        var nazwisko = req.query.nazwisko;\n        var data_urodzenia = req.query.data_urodzenia;\n        var query = {};\n        if (imie !== undefined) query.imie = imie;\n        if (nazwisko !== undefined) query.nazwisko = nazwisko;\n        if (data_urodzenia !== undefined) query.data_urodzenia = data_urodzenia;\n        console.log(query);\n        _model2.default.find(query, function (err, rec) {\n            if (err) {\n                console.log('db error');\n                res.json({ result: '!!! ERROR !!!' });\n            } else if (rec.length === 0) {\n                res.json({ result: null });\n            } else {\n                res.json(rec);\n            }\n        });\n    }\n});\n\nexports.router = router;"]}