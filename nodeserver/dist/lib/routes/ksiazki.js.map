{"version":3,"sources":["../../../lib/routes/ksiazki.js"],"names":["Object","defineProperty","exports","value","express","require","router","Router","mongoose","connect","ksiazkiModel","model","ksiazkaSchema","get","req","res","next","tytul","query","autor","rok_wydania","undefined","console","log","find","err","rec","json","result","length","default"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;AAGA,IAAIC,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AACA,IAAIC,WAAWH,QAAQ,UAAR,CAAf;;AAEA;AACAG,SAASC,OAAT,CAAiB,gCAAjB;;AAEA;AACA,IAAIC,eAAeF,SAASG,KAAT,CAAe,UAAf,EAA2BC,aAA3B,CAAnB;;AAEA;AACAN,OAAOO,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACtC,QAAIC,QAAQH,IAAII,KAAJ,CAAUD,KAAtB;AACA,QAAIE,QAAQL,IAAII,KAAJ,CAAUC,KAAtB;AACA,QAAIC,cAAcN,IAAII,KAAJ,CAAUE,WAA5B;AACA,QAAIF,QAAQ,EAAZ;AACA,QAAID,UAAUI,SAAd,EAAyBH,MAAMD,KAAN,GAAcA,KAAd;AACzB,QAAIE,UAAUE,SAAd,EAAyBH,MAAMC,KAAN,GAAcA,KAAd;AACzB,QAAIC,gBAAgBC,SAApB,EAA+BH,MAAME,WAAN,GAAoBA,WAApB;AAC/BE,YAAQC,GAAR,CAAYL,KAAZ;AACAR,iBAAac,IAAb,CAAkBN,KAAlB,EAAyB,UAAUO,GAAV,EAAeC,GAAf,EAAoB;AACzC,YAAID,GAAJ,EAAS;AACLH,oBAAQC,GAAR,CAAY,UAAZ;AACAR,gBAAIY,IAAJ,CAAS,EAAEC,QAAQ,eAAV,EAAT;AACH,SAHD,MAGO,IAAIF,IAAIG,MAAJ,KAAe,CAAnB,EAAsB;AACzBd,gBAAIY,IAAJ,CAAS,EAAEC,QAAQ,IAAV,EAAT;AACH,SAFM,MAEA;AACHb,gBAAIY,IAAJ,CAASD,GAAT;AACH;AACJ,KATD;AAUH,CAnBD;;AAqBAxB,QAAQ4B,OAAR,GAAkBxB,MAAlB","file":"ksiazki.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar express = require('express');\nvar router = express.Router();\nvar mongoose = require('mongoose');\n\n//db setup\nmongoose.connect('mongodb://localhost/biblioteka');\n\n//create a model\nvar ksiazkiModel = mongoose.model('ksiazkis', ksiazkaSchema);\n\n/* GET users listing. */\nrouter.get('/', function (req, res, next) {\n    var tytul = req.query.tytul;\n    var autor = req.query.autor;\n    var rok_wydania = req.query.rok_wydania;\n    var query = {};\n    if (tytul !== undefined) query.tytul = tytul;\n    if (autor !== undefined) query.autor = autor;\n    if (rok_wydania !== undefined) query.rok_wydania = rok_wydania;\n    console.log(query);\n    ksiazkiModel.find(query, function (err, rec) {\n        if (err) {\n            console.log('db error');\n            res.json({ result: '!!! ERROR !!!' });\n        } else if (rec.length === 0) {\n            res.json({ result: null });\n        } else {\n            res.json(rec);\n        }\n    });\n});\n\nexports.default = router;"]}