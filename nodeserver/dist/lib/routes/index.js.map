{"version":3,"sources":["../../../lib/routes/index.js"],"names":["Object","defineProperty","exports","value","_express","require","_express2","_interopRequireDefault","_mongodb","_mongodb2","obj","__esModule","default","router","Router","get","req","res","next","mongoClient","MongoClient","url","input","query","connect","err","db","mydb","collection","find","toArray","result","console","log","json","close","createCollection","send","myobj","name","address","insertOne","dbo","undefined","deleteOne","drop","delOK","newvalues","$set","nname","naddress","updateOne"],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _mongodb = require('mongodb');\n\nvar _mongodb2 = _interopRequireDefault(_mongodb);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = new _express2.default.Router();\n\n/* GET home page. */\nrouter.get('/', function (req, res, next) {\n    //  res.render('index', { title: 'Express' });\n    var mongoClient = _mongodb2.default.MongoClient;\n    var url = \"mongodb://localhost:27017/\";\n    var input = req.query.input;\n    if (input === 'findAll') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var mydb = db.db('mydb');\n            mydb.collection(\"customers\").find({}).toArray(function (err, result) {\n                if (err) throw err;\n                console.log(result);\n                res.json(result);\n                db.close();\n            });\n        });\n    } else if (input === 'createCollection') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var mydb = db.db(\"mydb\");\n            mydb.createCollection(\"customers\", function (err, res) {\n                if (err) throw err;\n                console.log(\"Collection created!\");\n                res.send(\"Collection created!\");\n                db.close();\n            });\n        });\n    } else if (input === 'insertOne') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var mydb = db.db(\"mydb\");\n            var myobj = { name: req.query.name, address: req.query.address };\n            console.log(myobj);\n            mydb.collection(\"customers\").insertOne(myobj, function (err, result) {\n                if (err) throw err;\n                console.log(\"1 document inserted\");\n                res.send(\"1 document inserted\");\n                db.close();\n            });\n        });\n    } else if (input === 'find') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var dbo = db.db(\"mydb\");\n            var query = {};\n            if (req.query.name !== undefined) query['name'] = req.query.name;\n            if (req.query.address !== undefined) query['address'] = req.query.address;\n            console.log(query);\n            dbo.collection(\"customers\").find(query).toArray(function (err, result) {\n                if (err) throw err;\n                console.log(result);\n                res.json(result);\n                db.close();\n            });\n        });\n    } else if (input === 'delete') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var dbo = db.db(\"mydb\");\n            var query = {};\n            if (req.query.name !== undefined) query['name'] = req.query.name;\n            if (req.query.address !== undefined) query['address'] = req.query.address;\n\n            dbo.collection(\"customers\").deleteOne(query, function (err, obj) {\n                if (err) throw err;\n                console.log(\"1 document deleted\");\n                res.send(\"1 document deleted\");\n                db.close();\n            });\n        });\n    } else if (input === 'drop') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var dbo = db.db(\"mydb\");\n            dbo.collection(\"customers\").drop(function (err, delOK) {\n                if (err) throw err;\n                if (delOK) {\n                    console.log(\"Collection deleted\");\n                    res.send(\"Collection deleted\");\n                }\n                db.close();\n            });\n        });\n    } else if (input === 'update') {\n        mongoClient.connect(url, function (err, db) {\n            if (err) throw err;\n            var dbo = db.db(\"mydb\");\n            var query = {};\n            if (req.query.name !== undefined) query['name'] = req.query.name;\n            if (req.query.address !== undefined) query['address'] = req.query.address;\n            var newvalues = { $set: {} };\n            if (req.query.nname !== undefined) newvalues.$set.name = req.query.nname;\n            if (req.query.naddress !== undefined) newvalues.$set.address = req.query.naddress;\n            dbo.collection(\"customers\").updateOne(query, newvalues, function (err, result) {\n                if (err) throw err;\n                console.log(\"1 document updated\");\n                res.send(\"1 document updated\");\n                db.close();\n            });\n        });\n    } else {\n        res.send('Hello to my MongoDB database.');\n    }\n});\n\nexports.default = router;"]}